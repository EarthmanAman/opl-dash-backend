(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[16],{427:function(e,t,r){"use strict";r.r(t);var n=r(62),a=r(12),s=r(13),_=r(14),o=r(15),c=r(63),T=r.n(c),O=r(0),i=r.n(O),l=r(428),u=r(97),E=r(266),A=r(436),d=r(429),N=r(25),C=r(2),p=r(68),D=r(79),b=r(26),P=r(75),j=r(3),f=Object(O.lazy)((function(){return Promise.all([r.e(6),r.e(15)]).then(r.bind(null,270))})),x=function(e){Object(_.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var s=arguments.length,_=new Array(s),o=0;o<s;o++)_[o]=arguments[o];return(e=t.call.apply(t,[this].concat(_))).state={spinner:!1,redirect:!1,redirect_depot:!1,email:"",password:"",show_error:!1,null_error:!1,loaded:!1},e.onSubmit=function(){var t=Object(n.a)(T.a.mark((function t(r){var n,a,s;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e.props.GET_TOKEN_ERROR_REMOVE_ACTION();case 3:if(n=e.state,a=n.email,s=n.password,""!==a&&""!==s){t.next=8;break}e.setState({null_error:!0}),t.next=11;break;case 8:return e.setState({spinner:!0,show_error:!1}),t.next=11,e.props.GET_TOKEN_ACTION(a,s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=(t.show_error,t.null_error),n=t.spinner;t.email;return this.state.redirect?Object(j.jsx)(C.a,{to:"/"}):this.state.redirect_depot?Object(j.jsx)(C.a,{to:"/depots"}):Object(j.jsx)(l.a,{children:Object(j.jsxs)(u.a,{className:"login-row",children:[n?Object(j.jsx)(b.a,{spinner:n}):null,Object(j.jsx)(E.a,{className:"login-row__logo-col",children:Object(j.jsx)("img",{src:"".concat(D.b,"/static/opl_logo.png"),alt:"logo"})}),Object(j.jsx)(E.a,{xs:7,className:"login-row__form-col",children:Object(j.jsxs)(A.a,{onSubmit:this.onSubmit,className:"login-form",children:[Object(j.jsxs)("div",{className:"login-form__title",children:[Object(j.jsx)("h3",{children:"Sign in To The Dashboard"}),Object(j.jsx)("p",{children:"Enter your email and password to sign in."})]}),null!==this.props.login_error&&void 0!==this.props.login_error?Object(j.jsxs)(O.Suspense,{fallback:Object(j.jsx)(b.a,{spinner:!0}),children:[Object(j.jsx)(f,{errors:this.props.login_error})," "]}):null,r?Object(j.jsx)(O.Suspense,{fallback:Object(j.jsx)(b.a,{spinner:!0}),children:Object(j.jsx)(f,{errors:{"":["Fields cannot be empty"]}})}):null,Object(j.jsx)(A.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(j.jsx)(A.a.Control,{type:"text",placeholder:"Enter email",className:"login-form__input",onChange:function(t){return e.setState({email:t.target.value,show_error:!1,null_error:!1})}})}),Object(j.jsx)(A.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(j.jsx)(A.a.Control,{type:"password",placeholder:"Password",className:"login-form__input",onChange:function(t){return e.setState({password:t.target.value,show_error:!1,null_error:!1})}})}),Object(j.jsx)(d.a,{variant:"primary",type:"submit",className:"login-form__submit",children:"Submit"})]})})]})})}}]),r}(i.a.Component);x.getDerivedStateFromProps=function(){var e=Object(n.a)(T.a.mark((function e(t,r){var n,a,s,_,o,c,O,i,l,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.login_error,a=t.token,s=t.product_list,_=t.depot_list,o=t.customer_list,c=new Date("30 Jan 2022"),O=new Date("30 Jan 2022"),i=new Date("30 Jan 2022"),l=new Date("30 Jan 2022"),"object"!==typeof t.login_error||null===n){e.next=10;break}r.show_error=!0,r.spinner=!1,e.next=59;break;case 10:if(void 0===s||void 0===_||void 0===o){e.next=16;break}!1===a.is_staff?r.redirect_depot=!0:void 0!==o&&(r.redirect=!0),r.show_error=!1,r.spinner=!1,e.next=59;break;case 16:if(void 0===a||null===a||!1!==r.loaded){e.next=59;break}return r.loaded=!0,u=Object(P.a)(O,-1),e.next=21,t.UPDATE_DASHBOARD_METRIC_ACTION(!0);case 21:return e.next=23,t.UPDATE_CURRENCY_TYPE_ACTION("Million");case 23:return e.next=25,t.UPDATE_SELECTION_DATES_ACTION({endDate:c,startDate:u});case 25:return e.next=27,t.UPDATE_DEPOT_MONTH_MONTH_ACTION(13);case 27:return e.next=29,t.UPDATE_DEPOT_MONTH_YEAR_ACTION(c.getFullYear());case 29:return e.next=31,t.UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION(13);case 31:return e.next=33,t.UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION(c.getFullYear());case 33:return e.next=35,t.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(c.getFullYear());case 35:return e.next=37,t.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(13);case 37:return e.next=39,t.UPDATE_DEPOT_ACTION(0);case 39:return e.next=41,t.UPDATE_SALES_DATE_ACTION({end_date:i,start_date:Object(P.a)(l,-1)});case 41:if(!a.is_staff){e.next=50;break}return e.next=44,t.UPDATE_PRODUCT_MONTH_YEAR_ACTION(c.getFullYear());case 44:return e.next=46,t.UPDATE_TOP_CUSTOMER_MONTH_ACTION(13);case 46:return e.next=48,t.UPDATE_TOP_CUSTOMER_YEAR_ACTION(c.getFullYear());case 48:return e.next=50,t.UPDATE_TOP_CUSTOMER_PRODUCT_ACTION("All");case 50:return e.next=52,t.GET_DEPOT_LIST_ACTION();case 52:return e.next=54,t.GET_PRODUCT_LIST_ACTION();case 54:return e.next=56,t.GET_CUSTOMER_LIST_ACTION();case 56:return e.next=58,t.GET_TRUCK_LIST_ACTION();case 58:case 59:return e.abrupt("return",r);case 60:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var I={GET_TOKEN_ACTION:p.q,GET_TOKEN_ERROR_REMOVE_ACTION:p.r,GET_CUSTOMER_LIST_ACTION:p.e,GET_DEPOT_LIST_ACTION:p.g,GET_TRUCK_LIST_ACTION:p.t,GET_PRODUCT_LIST_ACTION:p.l,UPDATE_DASHBOARD_METRIC_ACTION:p.y,UPDATE_SELECTION_DATES_ACTION:p.Q,UPDATE_CURRENCY_TYPE_ACTION:p.w,UPDATE_PRODUCT_MONTH_YEAR_ACTION:p.N,UPDATE_DEPOT_MONTH_MONTH_ACTION:p.E,UPDATE_DEPOT_MONTH_YEAR_ACTION:p.F,UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION:p.H,UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION:p.I,UPDATE_TOP_CUSTOMER_MONTH_ACTION:p.S,UPDATE_TOP_CUSTOMER_PRODUCT_ACTION:p.T,UPDATE_TOP_CUSTOMER_YEAR_ACTION:p.U,UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:p.B,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:p.C,UPDATE_SALES_DATE_ACTION:p.P,UPDATE_DEPOT_ACTION:p.z};t.default=Object(N.b)((function(e){return{token:e.auth_reducer.token,login_error:e.auth_reducer.login_error,depot_list:e.list_reducer.depot_list,product_list:e.list_reducer.product_list,customer_list:e.list_reducer.customer_list}}),I)(x)},75:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s}));var n=function(e,t){return e.setMonth(e.getMonth()+t),e},a=function(e){return"Million"===e?"m":"k"},s=function(e){return parseFloat(e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}},97:function(e,t,r){"use strict";var n=r(18),a=r(69),s=r(65),_=r.n(s),o=r(0),c=r(71),T=r(3),O=["bsPrefix","className","as"],i=o.forwardRef((function(e,t){var r=e.bsPrefix,s=e.className,o=e.as,i=void 0===o?"div":o,l=Object(a.a)(e,O),u=Object(c.b)(r,"row"),E=Object(c.a)(),A="".concat(u,"-cols"),d=[];return E.forEach((function(e){var t,r=l[e];delete l[e],t=null!=r&&"object"===typeof r?r.cols:r;var n="xs"!==e?"-".concat(e):"";null!=t&&d.push("".concat(A).concat(n,"-").concat(t))})),Object(T.jsx)(i,Object(n.a)(Object(n.a)({ref:t},l),{},{className:_.a.apply(void 0,[s,u].concat(d))}))}));i.displayName="Row",t.a=i}}]);
//# sourceMappingURL=16.0b7ecabf.chunk.js.map