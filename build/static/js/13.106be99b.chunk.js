(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[13],{281:function(e,t,r){"use strict";var n=r(18),a=r(69),_=r(68),s=r.n(_),o=r(0),T=r(72),c=r(3),O=["bsPrefix","className","as"],i=o.forwardRef((function(e,t){var r=e.bsPrefix,_=e.className,o=e.as,i=void 0===o?"div":o,l=Object(a.a)(e,O),u=Object(T.b)(r,"row"),E=Object(T.a)(),A="".concat(u,"-cols"),N=[];return E.forEach((function(e){var t,r=l[e];delete l[e],t=null!=r&&"object"===typeof r?r.cols:r;var n="xs"!==e?"-".concat(e):"";null!=t&&N.push("".concat(A).concat(n,"-").concat(t))})),Object(c.jsx)(i,Object(n.a)(Object(n.a)({ref:t},l),{},{className:s.a.apply(void 0,[_,u].concat(N))}))}));i.displayName="Row",t.a=i},417:function(e,t,r){"use strict";r.r(t);var n=r(60),a=r(12),_=r(13),s=r(14),o=r(15),T=r(61),c=r.n(T),O=r(0),i=r.n(O),l=r(408),u=r(281),E=r(282),A=r(413),N=r(409),C=r(25),d=r(2),p=(r(83),r(84),r(64)),D=r(71),P=r(412),b=r(3),j=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(_.a)(r,[{key:"render",value:function(){var e=this;return Object.keys(this.props.errors).map((function(t,r){return Object(b.jsxs)(P.a,{variant:"danger",children:[t,": ",e.props.errors[t][0]]},r)}))}}]),r}(i.a.Component),f=j,U=r(26),I=r(76),x=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(a.a)(this,r);for(var _=arguments.length,s=new Array(_),o=0;o<_;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={spinner:!1,redirect:!1,redirect_depot:!1,email:"",password:"",show_error:!1,null_error:!1,loaded:!1},e.onSubmit=function(){var t=Object(n.a)(c.a.mark((function t(r){var n,a,_;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,e.props.GET_TOKEN_ERROR_REMOVE_ACTION();case 3:if(n=e.state,a=n.email,_=n.password,""!==a&&""!==_){t.next=8;break}e.setState({null_error:!0}),t.next=11;break;case 8:return e.setState({spinner:!0,show_error:!1}),t.next=11,e.props.GET_TOKEN_ACTION(a,_);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(_.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.show_error,n=t.null_error,a=t.spinner;t.email;return this.state.redirect?Object(b.jsx)(d.a,{to:"/"}):this.state.redirect_depot?Object(b.jsx)(d.a,{to:"/depots"}):Object(b.jsx)(l.a,{children:Object(b.jsxs)(u.a,{className:"login-row",children:[a?Object(b.jsx)(U.a,{spinner:a}):null,Object(b.jsx)(E.a,{className:"login-row__logo-col",children:Object(b.jsx)("img",{src:"".concat(D.b,"/static/opl_logo.png"),alt:"logo"})}),Object(b.jsx)(E.a,{xs:7,className:"login-row__form-col",children:Object(b.jsxs)(A.a,{onSubmit:this.onSubmit,className:"login-form",children:[Object(b.jsxs)("div",{className:"login-form__title",children:[Object(b.jsx)("h3",{children:"Sign in To The Dashboard"}),Object(b.jsx)("p",{children:"Enter your email and password to sign in."})]}),r?Object(b.jsx)(f,{errors:this.props.login_error}):null,n?Object(b.jsx)(f,{errors:{"":["Fields cannot be empty"]}}):null,Object(b.jsx)(A.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:Object(b.jsx)(A.a.Control,{type:"text",placeholder:"Enter email",className:"login-form__input",onChange:function(t){return e.setState({email:t.target.value,show_error:!1,null_error:!1})}})}),Object(b.jsx)(A.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:Object(b.jsx)(A.a.Control,{type:"password",placeholder:"Password",className:"login-form__input",onChange:function(t){return e.setState({password:t.target.value,show_error:!1,null_error:!1})}})}),Object(b.jsx)(N.a,{variant:"primary",type:"submit",className:"login-form__submit",children:"Submit"})]})})]})})}}]),r}(i.a.Component);x.getDerivedStateFromProps=function(){var e=Object(n.a)(c.a.mark((function e(t,r){var n,a,_,s,o,T,O,i,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.login_error,a=t.token,_=t.product_list,s=t.depot_list,o=t.customer_list,T=new Date("30 Jan 2022"),O=new Date("30 Jan 2022"),i=new Date("30 Jan 2022"),l=new Date("30 Jan 2022"),"object"!==typeof t.login_error||null===n){e.next=10;break}r.show_error=!0,r.spinner=!1,e.next=57;break;case 10:if(void 0===_||void 0===s||void 0===o){e.next=16;break}!1===a.is_staff?r.redirect_depot=!0:void 0!==o&&(r.redirect=!0),r.show_error=!1,r.spinner=!1,e.next=57;break;case 16:if(void 0===a||null===a||!1!==r.loaded){e.next=57;break}return r.loaded=!0,u=Object(I.a)(O,-1),e.next=21,t.UPDATE_DASHBOARD_METRIC_ACTION(!0);case 21:return e.next=23,t.UPDATE_CURRENCY_TYPE_ACTION("Million");case 23:return e.next=25,t.UPDATE_SELECTION_DATES_ACTION({endDate:T,startDate:u});case 25:return e.next=27,t.UPDATE_DEPOT_MONTH_MONTH_ACTION(13);case 27:return e.next=29,t.UPDATE_DEPOT_MONTH_YEAR_ACTION(T.getFullYear());case 29:return e.next=31,t.UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION(13);case 31:return e.next=33,t.UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 33:return e.next=35,t.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(T.getFullYear());case 35:return e.next=37,t.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(13);case 37:return e.next=39,t.UPDATE_DEPOT_ACTION(0);case 39:if(!a.is_staff){e.next=50;break}return e.next=42,t.UPDATE_SALES_DATE_ACTION({end_date:i,start_date:Object(I.a)(l,-1)});case 42:return e.next=44,t.UPDATE_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 44:return e.next=46,t.UPDATE_TOP_CUSTOMER_MONTH_ACTION(13);case 46:return e.next=48,t.UPDATE_TOP_CUSTOMER_YEAR_ACTION(T.getFullYear());case 48:return e.next=50,t.UPDATE_TOP_CUSTOMER_PRODUCT_ACTION("All");case 50:return e.next=52,t.GET_DEPOT_LIST_ACTION();case 52:return e.next=54,t.GET_PRODUCT_LIST_ACTION();case 54:return e.next=56,t.GET_CUSTOMER_LIST_ACTION();case 56:case 57:return e.abrupt("return",r);case 58:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();var R={GET_TOKEN_ACTION:p.q,GET_TOKEN_ERROR_REMOVE_ACTION:p.r,GET_TOP_CUSTOMER_ACTION:p.s,GET_CUSTOMER_LIST_ACTION:p.e,GET_DEPOT_MONTH_ACTION:p.h,GET_DEPOT_LIST_ACTION:p.g,GET_PRODUCT_SERIES_ACTION:p.n,GET_PRODUCT_MONTH_ACTION:p.m,GET_PRODUCT_TOP_CUSTOMER_ACTION:p.o,GET_PRODUCT_LIST_ACTION:p.l,UPDATE_DASHBOARD_METRIC_ACTION:p.x,UPDATE_SELECTION_DATES_ACTION:p.O,UPDATE_CURRENCY_TYPE_ACTION:p.v,UPDATE_PRODUCT_MONTH_YEAR_ACTION:p.L,UPDATE_DEPOT_MONTH_MONTH_ACTION:p.D,UPDATE_DEPOT_MONTH_YEAR_ACTION:p.E,UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION:p.G,UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION:p.H,UPDATE_TOP_CUSTOMER_MONTH_ACTION:p.Q,UPDATE_TOP_CUSTOMER_PRODUCT_ACTION:p.R,UPDATE_TOP_CUSTOMER_YEAR_ACTION:p.S,UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:p.A,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:p.B,UPDATE_SALES_DATE_ACTION:p.N,UPDATE_DEPOT_ACTION:p.y};t.default=Object(C.b)((function(e){return{token:e.auth_reducer.token,login_error:e.auth_reducer.login_error,depot_list:e.list_reducer.depot_list,product_list:e.list_reducer.product_list,customer_list:e.list_reducer.customer_list}}),R)(x)},76:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return _}));var n=function(e,t){return e.setMonth(e.getMonth()+t),e},a=function(e){return"Million"===e?"m":"k"},_=function(e){return parseFloat(e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}}}]);
//# sourceMappingURL=13.106be99b.chunk.js.map