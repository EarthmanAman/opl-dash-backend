(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[26],{416:function(e,t,r){"use strict";r.r(t);var s=r(12),a=r(13),c=r(14),n=r(15),o=r(0),l=r.n(o),u=r(97),i=r(265),p=r(62),_=r(63),m=r.n(_),d=r(429),h=r(25),O=r(68),j=r(3),b=function(e){Object(c.a)(r,e);var t=Object(n.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={year:e.props.top_customer_year,month:parseInt(e.props.top_customer_month),product_list:e.props.product_list,product:e.props.top_customer_product},e.handleChange=function(){var t=Object(p.a)(m.a.mark((function t(r,s,a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.UPDATE_TOP_CUSTOMER_ACTION();case 2:if("All"!==a||13!==s){t.next=7;break}return t.next=5,e.props.GET_TOP_CUSTOMER_ACTION(r,"False");case 5:case 10:case 15:t.next=20;break;case 7:if("All"!==a||13===s){t.next=12;break}return t.next=10,e.props.GET_TOP_CUSTOMER_ACTION(r,"True");case 12:if("All"===a||13!==s){t.next=17;break}return t.next=15,e.props.GET_PRODUCT_TOP_CUSTOMER_ACTION(r,"False");case 17:if("All"===a||13===s){t.next=20;break}return t.next=20,e.props.GET_PRODUCT_TOP_CUSTOMER_ACTION(r,"True");case 20:return t.next=22,e.props.UPDATE_TOP_CUSTOMER_YEAR_ACTION(r);case 22:return t.next=24,e.props.UPDATE_TOP_CUSTOMER_MONTH_ACTION(s);case 24:return t.next=26,e.props.UPDATE_TOP_CUSTOMER_PRODUCT_ACTION(a);case 26:case"end":return t.stop()}}),t)})));return function(e,r,s){return t.apply(this,arguments)}}(),e}return Object(a.a)(r,[{key:"render",value:function(){var e=this,t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=this.state.product_list,s=this.state,a=s.year,c=s.month,n=s.product;return Object(j.jsxs)("div",{className:"pie-select",children:[Object(j.jsxs)(d.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(j.jsx)(d.a.Label,{children:"Year"}),Object(j.jsxs)(d.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleChange(t.target.value,c,n)},children:[Object(j.jsx)("option",{children:this.state.year}),[2022,2021].map((function(t,r){return parseInt(e.state.year)===t?null:Object(j.jsx)("option",{value:t,children:t},r)}))]})]}),Object(j.jsxs)(d.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(j.jsx)(d.a.Label,{children:"Month"}),Object(j.jsxs)(d.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleChange(a,t.target.value,n)},children:[13===this.state.month?null:Object(j.jsx)("option",{value:this.state.month,children:t[parseInt(this.state.month)]}),Object(j.jsx)("option",{value:13,children:"All"}),t.map((function(t,r){return parseInt(e.state.month)===r?null:Object(j.jsx)("option",{value:r,children:t},r)}))]})]}),Object(j.jsxs)(d.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(j.jsx)(d.a.Label,{children:"Product"}),Object(j.jsxs)(d.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleChange(a,c,t.target.value)},children:[Object(j.jsx)("option",{children:"All"===this.state.product?"All":this.state.product}),"All"===this.state.product?null:Object(j.jsx)("option",{value:"All",children:"All"}),r.map((function(t,r){return e.state.product===t.name?null:Object(j.jsx)("option",{value:t.name,children:t.name},r)}))]})]})]})}}]),r}(l.a.Component);b.getDerivedStateFromProps=function(e,t){return t.year=e.top_customer_year,t.month=parseInt(e.top_customer_month),t.product=e.top_customer_product,t.product_list=e.product_list,t};var T={UPDATE_TOP_CUSTOMER_MONTH_ACTION:O.S,UPDATE_TOP_CUSTOMER_YEAR_ACTION:O.U,UPDATE_TOP_CUSTOMER_PRODUCT_ACTION:O.T,GET_TOP_CUSTOMER_ACTION:O.s,GET_PRODUCT_TOP_CUSTOMER_ACTION:O.o,UPDATE_TOP_CUSTOMER_ACTION:O.R},x=Object(h.b)((function(e){return{top_customer_month:e.update_reducer.top_customer_month,top_customer_year:e.update_reducer.top_customer_year,top_customer_product:e.update_reducer.top_customer_product,product_list:e.list_reducer.product_list?e.list_reducer.product_list:[]}}),T)(b),f=r(26),v=function(e){Object(c.a)(r,e);var t=Object(n.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,c=new Array(a),n=0;n<a;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={customers:[],metric:e.props.dashboard_metric,spinner:!1},e.numberWithCommas=function(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return e}},e}return Object(a.a)(r,[{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"chart-area top-customers",children:[Object(j.jsx)(x,{}),this.state.spinner?Object(j.jsxs)("div",{style:{position:"relative",height:350},children:[Object(j.jsx)(f.a,{spinner:this.state.spinner})," "]}):Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"top-customers__top",children:[Object(j.jsx)("h6",{style:{marginLeft:20},children:"Top Customers"}),Object(j.jsxs)("div",{className:"legends",children:[Object(j.jsx)("div",{className:"legend-item"}),Object(j.jsx)("div",{className:"legend-item"})]})]}),Object(j.jsxs)(u.a,{className:"top_customers__customer-row",children:[this.state.customers.slice(0,8).map((function(t,r){return Object(j.jsx)(i.a,{xs:3,children:Object(j.jsxs)("div",{className:"top-customer",children:[Object(j.jsx)("div",{className:"top-customer__total",children:Object(j.jsxs)("h5",{className:"top-customer__amount",children:[e.state.dashboard_metric?"Kshs.":"Litres."," ",e.numberWithCommas(t.sum)]})}),Object(j.jsxs)("div",{className:"top-customer__info",children:[Object(j.jsx)("div",{className:"top-customer__profile"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("h6",{className:"top-customer__name",children:t.customer__name}),Object(j.jsx)("p",{className:"top-customer__location",children:t.location})]})]})]})},r)})),0===this.state.customers.length?Object(j.jsx)("p",{className:"no-data",children:"No data for this year this month. Select another month or switch years"}):null]})]})]})}}]),r}(l.a.Component);v.getDerivedStateFromProps=function(e,t){if(e.update_top_customer)return t.spinner=!0,t;t.spinner=!1;var r=function(e){var t=null,r=[],s=e.top_customer_month;return"All"!==e.top_customer_product?(t=e.product_top_customer.filter((function(t){return t.name===e.top_customer_product}))[0],r=13===s?e.dashboard_metric?t.revenue:t.quantity:(t=e.dashboard_metric?t.revenue:t.quantity)[parseInt(s)].customers):(t=e.dashboard_metric?e.top_customer.revenue:e.top_customer.quantity,r=13===parseInt(s)?t:t[parseInt(s)].customers),r}(e);return t.customers=r,t.dashboard_metric=e.dashboard_metric,t};t.default=v},97:function(e,t,r){"use strict";var s=r(18),a=r(69),c=r(65),n=r.n(c),o=r(0),l=r(70),u=r(3),i=["bsPrefix","className","as"],p=o.forwardRef((function(e,t){var r=e.bsPrefix,c=e.className,o=e.as,p=void 0===o?"div":o,_=Object(a.a)(e,i),m=Object(l.b)(r,"row"),d=Object(l.a)(),h="".concat(m,"-cols"),O=[];return d.forEach((function(e){var t,r=_[e];delete _[e],t=null!=r&&"object"===typeof r?r.cols:r;var s="xs"!==e?"-".concat(e):"";null!=t&&O.push("".concat(h).concat(s,"-").concat(t))})),Object(u.jsx)(p,Object(s.a)(Object(s.a)({ref:t},_),{},{className:n.a.apply(void 0,[c,m].concat(O))}))}));p.displayName="Row",t.a=p}}]);
//# sourceMappingURL=26.7d233ace.chunk.js.map