(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[19],{423:function(t,e,r){"use strict";r.r(e);var n=r(62),s=r(12),o=r(13),c=r(14),a=r(15),p=r(63),_=r.n(p),u=r(0),i=r.n(u),d=r(25),l=r(2),h=r(91),m=r(68),j=(r(75),r(26)),O=r(3),b=Object(u.lazy)((function(){return Promise.all([r.e(4),r.e(3),r.e(6),r.e(9),r.e(27)]).then(r.bind(null,169))})),y=Object(u.lazy)((function(){return Promise.all([r.e(2),r.e(25)]).then(r.bind(null,415))})),x=Object(u.lazy)((function(){return r.e(26).then(r.bind(null,416))})),f=function(t){Object(c.a)(r,t);var e=Object(a.a)(r);function r(){var t;Object(s.a)(this,r);for(var o=arguments.length,c=new Array(o),a=0;a<o;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).state={redirect:!1,currency_type:t.props.currency_type,spinner:!1},t.componentDidMount=Object(n.a)(_.a.mark((function e(){var r,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({spinner:!0}),r=t.props.selection_dates.endDate,n=t.props.selection_dates.startDate,e.next=5,t.props.GET_PRODUCT_SERIES_ACTION(n,r);case 5:return e.next=7,t.props.GET_PRODUCT_MONTH_ACTION(t.props.product_month_year);case 7:return e.next=9,t.props.GET_DEPOT_MONTH_ACTION(t.props.depot_month_year);case 9:if(13!==t.props.top_customer_month){e.next=14;break}return e.next=12,t.props.GET_TOP_CUSTOMER_ACTION(t.props.top_customer_year,"False");case 12:e.next=16;break;case 14:return e.next=16,t.props.GET_TOP_CUSTOMER_ACTION(t.props.top_customer_year,"True");case 16:case"end":return e.stop()}}),e)}))),t}return Object(o.a)(r,[{key:"render",value:function(){return!0===this.state.redirect?Object(O.jsx)(l.a,{to:"/login"}):(console.log(this.props.token),Object(O.jsxs)(h.a,{header_title:"Dashboard",children:[Object(O.jsx)(u.Suspense,{fallback:Object(O.jsx)(j.a,{spinner:!0}),children:Object(O.jsx)(b,{})}),this.state.spinner?Object(O.jsx)(j.a,{spinner:this.state.spinner}):Object(O.jsxs)("div",{children:[Object(O.jsx)(u.Suspense,{fallback:Object(O.jsx)(j.a,{spinner:!0}),children:Object(O.jsx)(y,{product_series:this.props.product_series,product_month:this.props.product_month,depot_month:this.props.depot_month,selection_dates:this.props.selection_dates,dashboard_metric:this.props.dashboard_metric,currency_type:this.props.currency_type,product_month_year:this.props.product_month_year,depot_month_month:this.props.depot_month_month,depot_month_year:this.props.depot_month_year,update_product_series:this.props.update_product_series,update_product_month:this.props.update_product_month,update_depot_month:this.props.update_depot_month})}),Object(O.jsx)(u.Suspense,{fallback:Object(O.jsx)(j.a,{spinner:!0}),children:Object(O.jsx)(x,{dashboard_metric:this.props.dashboard_metric,top_customer:this.props.top_customer,top_customer_month:this.props.top_customer_month,top_customer_year:this.props.top_customer_year,product_top_customer:this.props.product_top_customer,top_customer_product:this.props.top_customer_product,update_top_customer:this.props.update_top_customer})})]})]}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var r=t.token,n=t.top_customer,s=t.depot_month,o=(t.depot_product_month,t.product_series),c=t.product_month;return void 0===r||null===r?(e.redirect=!0,e):void 0!==n&&void 0!==s&&void 0!==c&&void 0!==o?(e.spinner=!1,e):(e.spinner=!0,e)}}]),r}(i.a.Component),T={GET_TOP_CUSTOMER_ACTION:m.s,GET_DEPOT_MONTH_ACTION:m.h,GET_PRODUCT_SERIES_ACTION:m.n,GET_PRODUCT_MONTH_ACTION:m.m};e.default=Object(d.b)((function(t){return{token:t.auth_reducer.token,top_customer:t.list_reducer.top_customer,update_top_customer:t.list_reducer.update_top_customer,depot_month:t.list_reducer.depot_month,update_depot_month:t.list_reducer.update_depot_month,depot_product_month:t.list_reducer.depot_product_month,product_series:t.list_reducer.product_series,update_product_series:t.list_reducer.update_product_series,product_month:t.list_reducer.product_month,update_product_month:t.list_reducer.update_product_month,product_top_customer:t.list_reducer.product_top_customer,dashboard_metric:t.update_reducer.dashboard_metric,selection_dates:t.update_reducer.selection_dates,currency_type:t.update_reducer.currency_type,product_month_year:t.update_reducer.product_month_year,depot_month_month:t.update_reducer.depot_month_month,depot_month_year:t.update_reducer.depot_month_year,top_customer_month:t.update_reducer.top_customer_month,top_customer_year:t.update_reducer.top_customer_year,top_customer_product:t.update_reducer.top_customer_product}}),T)(f)},75:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return o}));var n=function(t,e){return t.setMonth(t.getMonth()+e),t},s=function(t){return"Million"===t?"m":"k"},o=function(t){return parseFloat(t.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}},91:function(t,e,r){"use strict";var n=r(12),s=r(13),o=r(14),c=r(15),a=r(0),p=r.n(a),_=r(421),u=r(422),i=r(25),d=r(84),l=r(2),h=r(29),m=r(62),j=r(63),O=r.n(j),b=r(429),y=r(112),x=r(68),f=r(3),T=function(t){Object(o.a)(r,t);var e=Object(c.a)(r);function r(){var t;Object(n.a)(this,r);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={currency_type:t.props.currency_type},t.handleCurrencyTypeChange=function(){var e=Object(m.a)(O.a.mark((function e(r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.UPDATE_CURRENCY_TYPE_ACTION(r);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(s.a)(r,[{key:"render",value:function(){var t=this;return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("h5",{children:this.props.header_title}),Object(f.jsxs)("div",{className:"header__left",children:[Object(f.jsx)("div",{children:Object(f.jsx)(u.a,{variant:"secondary",size:"sm",style:{marginRight:10},onClick:function(){return window.location.reload()},children:Object(f.jsx)(y.a,{color:"green"})})}),Object(f.jsx)(b.a.Group,{className:"header__currency",controlId:"exampleForm.ControlInput1",children:Object(f.jsxs)(b.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleCurrencyTypeChange(e.target.value)},children:[Object(f.jsx)("option",{children:this.state.currency_type}),["Million","Thousand"].map((function(e,r){return t.state.currency_type===e?null:Object(f.jsx)("option",{value:e,children:e},r)}))]})}),Object(f.jsxs)(u.a,{variant:"secondary",size:"sm",children:[this.props.first_name[0],this.props.last_name[0]]}),Object(f.jsxs)("p",{className:"header__header-name",children:[this.props.first_name," ",this.props.last_name]})]})]})}}]),r}(p.a.Component);T.getDerivedStateFromProps=function(){var t=Object(m.a)(O.a.mark((function t(e,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.currency_type=e.currency_type,t.abrupt("return",r);case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();var v={UPDATE_CURRENCY_TYPE_ACTION:x.w},N=Object(i.b)((function(t){return{currency_type:t.update_reducer.currency_type}}),v)(T),C=r(79),k=function(t){Object(o.a)(r,t);var e=Object(c.a)(r);function r(){var t;Object(n.a)(this,r);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={redirect:!1},t.handleLogOut=function(){t.props.USER_LOGGED_OUT_ACTION(),t.setState({redirect:!0})},t}return Object(s.a)(r,[{key:"render",value:function(){return this.state.redirect?Object(f.jsx)(l.a,{to:"/login"}):Object(f.jsxs)(_.a,{fluid:!0,className:"layout_main",children:[Object(f.jsxs)("div",{className:"layout_main__side",children:[Object(f.jsx)(h.b,{to:"/",className:"layout_main__logo",children:Object(f.jsx)("img",{src:"".concat(C.b,"/static/opl_logo.png"),alt:"logo",className:"layout_main__logo--img"})}),Object(f.jsxs)("div",{className:"layout_main__links",children:[!0===this.props.token.is_staff?Object(f.jsx)(h.c,{to:"/",className:"layout_main__button",children:Object(f.jsxs)("h6",{children:[Object(f.jsx)("span",{className:"layout_main__links--span",children:Object(f.jsx)(d.d,{size:20,color:"#D04D30"})}),"Dashboard"]})}):null,Object(f.jsx)(h.c,{to:"/depots",className:"layout_main__button",children:Object(f.jsxs)("h6",{children:[Object(f.jsx)("span",{className:"layout_main__links--span",children:Object(f.jsx)(d.a,{})}),"Depots"]})}),Object(f.jsx)(h.c,{to:"/sale",className:"layout_main__button",children:Object(f.jsxs)("h6",{children:[Object(f.jsx)("span",{className:"layout_main__links--span",children:Object(f.jsx)(d.i,{})}),"Sales"]})}),!0===this.props.token.is_staff?Object(f.jsx)(h.c,{to:"/customers",className:"layout_main__button",children:Object(f.jsxs)("h6",{children:[Object(f.jsx)("span",{className:"layout_main__links--span",children:Object(f.jsx)(d.j,{})}),"Customers"]})}):null,Object(f.jsx)(u.a,{variant:"transparent",className:"layout_main__button layout_main__logout",onClick:this.handleLogOut,children:Object(f.jsxs)("h6",{children:[Object(f.jsx)("span",{className:"layout_main__links--span",children:Object(f.jsx)(d.f,{})}),"Log Out"]})})]})]}),Object(f.jsxs)("div",{className:"layout_main__component",children:[Object(f.jsx)(N,{header_title:this.props.header_title,first_name:this.props.token.data.first_name,last_name:this.props.token.data.last_name}),this.props.children]})]})}}]),r}(p.a.Component),g={USER_LOGGED_OUT_ACTION:x.W};e.a=Object(i.b)((function(t){return{token:t.auth_reducer.token}}),g)(k)}}]);
//# sourceMappingURL=19.b8d1cb8c.chunk.js.map