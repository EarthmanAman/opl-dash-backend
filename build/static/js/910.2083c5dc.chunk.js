"use strict";(self.webpackChunkopl_frontend=self.webpackChunkopl_frontend||[]).push([[910],{7910:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});var n=t(5861),_=t(5671),s=t(3144),o=t(136),a=t(5716),T=t(7757),i=t.n(T),c=t(2791),l=t(7022),u=t(9743),O=t(2677),E=t(717),A=t(3360),C=t(6168),N=t(6871),d=(t(5866),t(3065),t(4650)),p=t(7883),D=t(9503),P=t(184),f=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(){return(0,_.Z)(this,t),r.apply(this,arguments)}return(0,s.Z)(t,[{key:"render",value:function(){var e=this;return Object.keys(this.props.errors).map((function(r,t){return(0,P.jsxs)(D.Z,{variant:"danger",children:[r,": ",e.props.errors[r][0]]},t)}))}}]),t}(c.Component),I=f,U=t(9600),x=t(3847),R=function(e){(0,o.Z)(t,e);var r=(0,a.Z)(t);function t(){var e;(0,_.Z)(this,t);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=r.call.apply(r,[this].concat(o))).state={spinner:!1,redirect:!1,redirect_depot:!1,email:"",password:"",show_error:!1,null_error:!1,loaded:!1},e.onSubmit=function(){var r=(0,n.Z)(i().mark((function r(t){var n,_,s;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),r.next=3,e.props.GET_TOKEN_ERROR_REMOVE_ACTION();case 3:if(n=e.state,_=n.email,s=n.password,""!==_&&""!==s){r.next=8;break}e.setState({null_error:!0}),r.next=11;break;case 8:return e.setState({spinner:!0,show_error:!1}),r.next=11,e.props.GET_TOKEN_ACTION(_,s);case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e}return(0,s.Z)(t,[{key:"render",value:function(){var e=this,r=this.state,t=r.show_error,n=r.null_error,_=r.spinner;r.email;return this.state.redirect?(0,P.jsx)(N.Fg,{to:"/"}):this.state.redirect_depot?(0,P.jsx)(N.Fg,{to:"/depots"}):(0,P.jsx)(l.Z,{children:(0,P.jsxs)(u.Z,{className:"login-row",children:[_?(0,P.jsx)(U.Z,{spinner:_}):null,(0,P.jsx)(O.Z,{className:"login-row__logo-col",children:(0,P.jsx)("img",{src:"".concat(p.J,"/static/opl_logo.png"),alt:"logo"})}),(0,P.jsx)(O.Z,{xs:7,className:"login-row__form-col",children:(0,P.jsxs)(E.Z,{onSubmit:this.onSubmit,className:"login-form",children:[(0,P.jsxs)("div",{className:"login-form__title",children:[(0,P.jsx)("h3",{children:"Sign in To The Dashboard"}),(0,P.jsx)("p",{children:"Enter your email and password to sign in."})]}),t?(0,P.jsx)(I,{errors:this.props.login_error}):null,n?(0,P.jsx)(I,{errors:{"":["Fields cannot be empty"]}}):null,(0,P.jsx)(E.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:(0,P.jsx)(E.Z.Control,{type:"text",placeholder:"Enter email",className:"login-form__input",onChange:function(r){return e.setState({email:r.target.value,show_error:!1,null_error:!1})}})}),(0,P.jsx)(E.Z.Group,{className:"mb-3",controlId:"formBasicPassword",children:(0,P.jsx)(E.Z.Control,{type:"password",placeholder:"Password",className:"login-form__input",onChange:function(r){return e.setState({password:r.target.value,show_error:!1,null_error:!1})}})}),(0,P.jsx)(A.Z,{variant:"primary",type:"submit",className:"login-form__submit",children:"Submit"})]})})]})})}}]),t}(c.Component);R.getDerivedStateFromProps=function(){var e=(0,n.Z)(i().mark((function e(r,t){var n,_,s,o,a,T,c,l,u,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.login_error,_=r.token,s=r.product_list,o=r.depot_list,a=r.customer_list,T=new Date("30 Jan 2022"),c=new Date("30 Jan 2022"),l=new Date("30 Jan 2022"),u=new Date("30 Jan 2022"),"object"!==typeof r.login_error||null===n){e.next=10;break}t.show_error=!0,t.spinner=!1,e.next=57;break;case 10:if(void 0===s||void 0===o||void 0===a){e.next=16;break}!1===_.is_staff?t.redirect_depot=!0:void 0!==a&&(t.redirect=!0),t.show_error=!1,t.spinner=!1,e.next=57;break;case 16:if(void 0===_||null===_||!1!==t.loaded){e.next=57;break}return t.loaded=!0,O=(0,x.zI)(c,-1),e.next=21,r.UPDATE_DASHBOARD_METRIC_ACTION(!0);case 21:return e.next=23,r.UPDATE_CURRENCY_TYPE_ACTION("Million");case 23:return e.next=25,r.UPDATE_SELECTION_DATES_ACTION({endDate:T,startDate:O});case 25:return e.next=27,r.UPDATE_DEPOT_MONTH_MONTH_ACTION(13);case 27:return e.next=29,r.UPDATE_DEPOT_MONTH_YEAR_ACTION(T.getFullYear());case 29:return e.next=31,r.UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION(13);case 31:return e.next=33,r.UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 33:return e.next=35,r.UPDATE_DEPOT_CUSTOMER_YEAR_ACTION(T.getFullYear());case 35:return e.next=37,r.UPDATE_DEPOT_CUSTOMER_MONTH_ACTION(13);case 37:return e.next=39,r.UPDATE_DEPOT_ACTION(0);case 39:if(!_.is_staff){e.next=50;break}return e.next=42,r.UPDATE_SALES_DATE_ACTION({end_date:l,start_date:(0,x.zI)(u,-1)});case 42:return e.next=44,r.UPDATE_PRODUCT_MONTH_YEAR_ACTION(T.getFullYear());case 44:return e.next=46,r.UPDATE_TOP_CUSTOMER_MONTH_ACTION(13);case 46:return e.next=48,r.UPDATE_TOP_CUSTOMER_YEAR_ACTION(T.getFullYear());case 48:return e.next=50,r.UPDATE_TOP_CUSTOMER_PRODUCT_ACTION("All");case 50:return e.next=52,r.GET_DEPOT_LIST_ACTION();case 52:return e.next=54,r.GET_PRODUCT_LIST_ACTION();case 54:return e.next=56,r.GET_CUSTOMER_LIST_ACTION();case 56:case 57:return e.abrupt("return",t);case 58:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}();var h={GET_TOKEN_ACTION:d.Wy,GET_TOKEN_ERROR_REMOVE_ACTION:d.bf,GET_TOP_CUSTOMER_ACTION:d.LS,GET_CUSTOMER_LIST_ACTION:d.lM,GET_DEPOT_MONTH_ACTION:d.au,GET_DEPOT_LIST_ACTION:d.oI,GET_PRODUCT_SERIES_ACTION:d.MV,GET_PRODUCT_MONTH_ACTION:d.qB,GET_PRODUCT_TOP_CUSTOMER_ACTION:d.Lu,GET_PRODUCT_LIST_ACTION:d.sJ,UPDATE_DASHBOARD_METRIC_ACTION:d.$d,UPDATE_SELECTION_DATES_ACTION:d.zS,UPDATE_CURRENCY_TYPE_ACTION:d.wS,UPDATE_PRODUCT_MONTH_YEAR_ACTION:d.cC,UPDATE_DEPOT_MONTH_MONTH_ACTION:d.eK,UPDATE_DEPOT_MONTH_YEAR_ACTION:d.bC,UPDATE_DEPOT_PRODUCT_MONTH_MONTH_ACTION:d.CU,UPDATE_DEPOT_PRODUCT_MONTH_YEAR_ACTION:d.zY,UPDATE_TOP_CUSTOMER_MONTH_ACTION:d.PW,UPDATE_TOP_CUSTOMER_PRODUCT_ACTION:d.zv,UPDATE_TOP_CUSTOMER_YEAR_ACTION:d.ef,UPDATE_DEPOT_CUSTOMER_MONTH_ACTION:d.JZ,UPDATE_DEPOT_CUSTOMER_YEAR_ACTION:d.QM,UPDATE_SALES_DATE_ACTION:d.JX,UPDATE_DEPOT_ACTION:d.Ek},m=(0,C.$j)((function(e){return{token:e.auth_reducer.token,login_error:e.auth_reducer.login_error,depot_list:e.list_reducer.depot_list,product_list:e.list_reducer.product_list,customer_list:e.list_reducer.customer_list}}),h)(R)},3847:function(e,r,t){t.d(r,{$G:function(){return s},P:function(){return _},zI:function(){return n}});var n=function(e,r){return e.setMonth(e.getMonth()+r),e},_=function(e){return"Million"===e?"m":"k"},s=function(e){return parseFloat(e.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0])}},9743:function(e,r,t){var n=t(1413),_=t(5987),s=t(1694),o=t.n(s),a=t(2791),T=t(162),i=t(184),c=["bsPrefix","className","as"],l=a.forwardRef((function(e,r){var t=e.bsPrefix,s=e.className,a=e.as,l=void 0===a?"div":a,u=(0,_.Z)(e,c),O=(0,T.vE)(t,"row"),E=(0,T.pi)(),A="".concat(O,"-cols"),C=[];return E.forEach((function(e){var r,t=u[e];delete u[e],r=null!=t&&"object"===typeof t?t.cols:t;var n="xs"!==e?"-".concat(e):"";null!=r&&C.push("".concat(A).concat(n,"-").concat(r))})),(0,i.jsx)(l,(0,n.Z)((0,n.Z)({ref:r},u),{},{className:o().apply(void 0,[s,O].concat(C))}))}));l.displayName="Row",r.Z=l}}]);
//# sourceMappingURL=910.2083c5dc.chunk.js.map