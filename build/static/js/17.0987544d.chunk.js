(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[17],{426:function(e,t,s){"use strict";s.r(t);var r=s(62),n=s(12),c=s(13),a=s(14),i=s(15),o=s(63),l=s.n(o),u=s(0),d=s.n(u),_=s(25),j=s(97),m=s(265),p=s(429),h=s(268),b=s(422),O=s(2),x=s(91),f=s(68),y=s(26),v=s(3),N=Object(u.lazy)((function(){return Promise.all([s.e(2),s.e(20)]).then(s.bind(null,411))})),C=Object(u.lazy)((function(){return s.e(30).then(s.bind(null,412))})),k=Object(u.lazy)((function(){return Promise.all([s.e(3),s.e(10)]).then(s.bind(null,256))})),T=Object(u.lazy)((function(){return Promise.all([s.e(4),s.e(7),s.e(8)]).then(s.bind(null,257))})),S=Object(u.lazy)((function(){return s.e(21).then(s.bind(null,413))})),g=function(e,t){return e=e.filter((function(e){return e.customer.name===t.name}))},E=function(e){Object(a.a)(s,e);var t=Object(i.a)(s);function s(){var e;Object(n.a)(this,s);for(var c=arguments.length,a=new Array(c),i=0;i<c;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1,spinner:!1,customer_spinner:!1,didnt_load:!1,customer_list:e.props.customer_list?e.props.customer_list:[],customer:e.props.customer_list?e.props.customer_list[0]:null,customer_name:null,customer_id:null,dashboard_metric:e.props.dashboard_metric,currency_type:e.props.currency_type,customer_year:e.props.customer_year,sales:[]},e.onSearchChange=function(t){""===t||void 0===t||null===t?e.setState({customer_list:e.props.customer_list}):e.setState({customer_name:t})},e.onSearch=function(t){t.preventDefault();var s=e.state.customer_name,r=e.props.customer_list;r=r.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())})),e.setState({customer_list:r})},e.onClick=function(){var t=Object(r.a)(l.a.mark((function t(s){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((r=(r=e.state.customer_list).filter((function(e){return e.id===parseInt(s)}))).length>0)){t.next=7;break}return t.next=5,e.setState({customer_id:r[0].id,customer_spinner:!0});case 5:return t.next=7,e.props.GET_CUSTOMER_DETAIL_ACTION(r[0].id);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=Object(r.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({spinner:!0}),t.next=3,e.props.UPDATE_CUSTOMER_YEAR_ACTION((new Date).getFullYear());case 3:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(s,[{key:"render",value:function(){var e=this,t=this.state,s=t.spinner,r=t.customer_year,n=null;try{n=this.state.dashboard_metric?this.state.customer.revenue:this.state.customer.quantity}catch(c){}return this.state.redirect?Object(v.jsx)(O.a,{to:"/login"}):(console.log(n),Object(v.jsxs)(x.a,{header_title:"CUSTOMERS",children:[s||void 0===this.props.customer_list||void 0===this.props.customer_detail?Object(v.jsx)(y.a,{spinner:s}):null,void 0!==this.props.customer_list?Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(y.a,{spinner:!0}),children:Object(v.jsx)(C,{})})}),Object(v.jsxs)(j.a,{children:[Object(v.jsx)(m.a,{xs:3,children:Object(v.jsxs)("div",{className:"customer-side chart-area",children:[Object(v.jsx)("h6",{children:"Pick a customer"}),Object(v.jsxs)(p.a,{className:"d-flex",onSubmit:this.onSearch,children:[Object(v.jsx)(h.a,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search",size:"sm",onChange:function(t){return e.onSearchChange(t.target.value)}}),Object(v.jsx)(b.a,{type:"submit",variant:"outline-primary",size:"sm",children:"Search"})]}),Object(v.jsx)("div",{children:this.state.customer_list.map((function(t,s){return Object(v.jsx)("div",{className:"customer-side__scroll",children:e.state.customer_id===t.id?Object(v.jsx)(b.a,{className:"customer-side__customer customer-side__active",variant:"transparent",onClick:function(){return e.onClick(t.id)},children:Object(v.jsxs)("div",{className:"customer-side__info",children:[Object(v.jsx)("div",{className:"customer-side__profile"}),Object(v.jsx)("div",{children:Object(v.jsx)("h6",{className:"customer-side__name",children:t.name})})]})}):Object(v.jsx)(b.a,{className:"customer-side__customer",variant:"transparent",onClick:function(){return e.onClick(t.id)},children:Object(v.jsxs)("div",{className:"customer-side__info",children:[Object(v.jsx)("div",{className:"customer-side__profile"}),Object(v.jsx)("div",{children:Object(v.jsx)("h6",{className:"customer-side__name",children:t.name})})]})})},s)}))})]})}),Object(v.jsx)(m.a,{xs:9,style:{position:"relative"},children:this.state.customer_spinner||void 0===n?Object(v.jsx)(y.a,{spinner:this.state.customer_spinner}):Object(v.jsxs)("div",{children:[Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(y.a,{spinner:!0}),children:Object(v.jsx)(S,{customer:n,name:this.state.customer?this.state.customer.name:null,customer_year:r})}),Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(y.a,{spinner:!0}),children:Object(v.jsx)(N,{customer:n,customer_year:r,dashboard_metric:this.state.dashboard_metric,currency_type:this.state.currency_type})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(y.a,{spinner:!0}),children:Object(v.jsx)(k,{})}),Object(v.jsx)(u.Suspense,{fallback:Object(v.jsx)(y.a,{spinner:!0}),children:Object(v.jsx)(T,{sales_list:this.state.sales,from_customer:!0})})]})]})})]})]}):null]}))}}]),s}(d.a.Component);E.getDerivedStateFromProps=function(){var e=Object(r.a)(l.a.mark((function e(t,s){var r,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.token,n=t.customer_list,c=t.customer_detail,void 0!==r&&""!==r){e.next=6;break}return s.redirect=!0,e.abrupt("return",s);case 6:if(null!==s.customer_id&&void 0!==c){e.next=14;break}return s.customer_id=n[0].id,s.spinner=!1,s.customer_spinner=!0,e.next=12,t.GET_CUSTOMER_DETAIL_ACTION(n[0].id);case 12:e.next=15;break;case 14:void 0!==c&&s.customer_id==c.id?(s.customer=c,s.sales=t.sale?g(t.sales,c):[],s.customer_spinner=!1,s.spinner=!1):void 0!==c&&s.customer_id!==c.id?s.customer_spinner=!0:(s.spinner=!1,s.customer_spinner=!1,s.customer_id=t.customer_detail.id);case 15:return s.customer_list=n,s.dashboard_metric=t.dashboard_metric,s.currency_type=t.currency_type,s.customer_year=t.customer_year,e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();var w={GET_CUSTOMER_LIST_ACTION:f.e,GET_CUSTOMER_DETAIL_ACTION:f.d,UPDATE_CUSTOMER_YEAR_ACTION:f.x};t.default=Object(_.b)((function(e){return{token:e.auth_reducer.token,customer_list:e.list_reducer.customer_list,customer_detail:e.list_reducer.customer_detail,dashboard_metric:e.update_reducer.dashboard_metric,currency_type:e.update_reducer.currency_type,customer_year:e.update_reducer.customer_year,sales:e.list_reducer.sales_list}}),w)(E)},91:function(e,t,s){"use strict";var r=s(12),n=s(13),c=s(14),a=s(15),i=s(0),o=s.n(i),l=s(421),u=s(422),d=s(25),_=s(84),j=s(2),m=s(29),p=s(62),h=s(63),b=s.n(h),O=s(429),x=s(112),f=s(68),y=s(3),v=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={currency_type:e.props.currency_type},e.handleCurrencyTypeChange=function(){var t=Object(p.a)(b.a.mark((function t(s){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.UPDATE_CURRENCY_TYPE_ACTION(s);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(n.a)(s,[{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("h5",{children:this.props.header_title}),Object(y.jsxs)("div",{className:"header__left",children:[Object(y.jsx)("div",{children:Object(y.jsx)(u.a,{variant:"secondary",size:"sm",style:{marginRight:10},onClick:function(){return window.location.reload()},children:Object(y.jsx)(x.a,{color:"green"})})}),Object(y.jsx)(O.a.Group,{className:"header__currency",controlId:"exampleForm.ControlInput1",children:Object(y.jsxs)(O.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(t){return e.handleCurrencyTypeChange(t.target.value)},children:[Object(y.jsx)("option",{children:this.state.currency_type}),["Million","Thousand"].map((function(t,s){return e.state.currency_type===t?null:Object(y.jsx)("option",{value:t,children:t},s)}))]})}),Object(y.jsxs)(u.a,{variant:"secondary",size:"sm",children:[this.props.first_name[0],this.props.last_name[0]]}),Object(y.jsxs)("p",{className:"header__header-name",children:[this.props.first_name," ",this.props.last_name]})]})]})}}]),s}(o.a.Component);v.getDerivedStateFromProps=function(){var e=Object(p.a)(b.a.mark((function e(t,s){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.currency_type=t.currency_type,e.abrupt("return",s);case 2:case"end":return e.stop()}}),e)})));return function(t,s){return e.apply(this,arguments)}}();var N={UPDATE_CURRENCY_TYPE_ACTION:f.w},C=Object(d.b)((function(e){return{currency_type:e.update_reducer.currency_type}}),N)(v),k=s(79),T=function(e){Object(c.a)(s,e);var t=Object(a.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={redirect:!1},e.handleLogOut=function(){e.props.USER_LOGGED_OUT_ACTION(),e.setState({redirect:!0})},e}return Object(n.a)(s,[{key:"render",value:function(){return this.state.redirect?Object(y.jsx)(j.a,{to:"/login"}):Object(y.jsxs)(l.a,{fluid:!0,className:"layout_main",children:[Object(y.jsxs)("div",{className:"layout_main__side",children:[Object(y.jsx)(m.b,{to:"/",className:"layout_main__logo",children:Object(y.jsx)("img",{src:"".concat(k.b,"/static/opl_logo.png"),alt:"logo",className:"layout_main__logo--img"})}),Object(y.jsxs)("div",{className:"layout_main__links",children:[!0===this.props.token.is_staff?Object(y.jsx)(m.c,{to:"/",className:"layout_main__button",children:Object(y.jsxs)("h6",{children:[Object(y.jsx)("span",{className:"layout_main__links--span",children:Object(y.jsx)(_.d,{size:20,color:"#D04D30"})}),"Dashboard"]})}):null,Object(y.jsx)(m.c,{to:"/depots",className:"layout_main__button",children:Object(y.jsxs)("h6",{children:[Object(y.jsx)("span",{className:"layout_main__links--span",children:Object(y.jsx)(_.a,{})}),"Depots"]})}),Object(y.jsx)(m.c,{to:"/sale",className:"layout_main__button",children:Object(y.jsxs)("h6",{children:[Object(y.jsx)("span",{className:"layout_main__links--span",children:Object(y.jsx)(_.i,{})}),"Sales"]})}),!0===this.props.token.is_staff?Object(y.jsx)(m.c,{to:"/customers",className:"layout_main__button",children:Object(y.jsxs)("h6",{children:[Object(y.jsx)("span",{className:"layout_main__links--span",children:Object(y.jsx)(_.j,{})}),"Customers"]})}):null,Object(y.jsx)(u.a,{variant:"transparent",className:"layout_main__button layout_main__logout",onClick:this.handleLogOut,children:Object(y.jsxs)("h6",{children:[Object(y.jsx)("span",{className:"layout_main__links--span",children:Object(y.jsx)(_.f,{})}),"Log Out"]})})]})]}),Object(y.jsxs)("div",{className:"layout_main__component",children:[Object(y.jsx)(C,{header_title:this.props.header_title,first_name:this.props.token.data.first_name,last_name:this.props.token.data.last_name}),this.props.children]})]})}}]),s}(o.a.Component),S={USER_LOGGED_OUT_ACTION:f.W};t.a=Object(d.b)((function(e){return{token:e.auth_reducer.token}}),S)(T)},97:function(e,t,s){"use strict";var r=s(18),n=s(69),c=s(65),a=s.n(c),i=s(0),o=s(70),l=s(3),u=["bsPrefix","className","as"],d=i.forwardRef((function(e,t){var s=e.bsPrefix,c=e.className,i=e.as,d=void 0===i?"div":i,_=Object(n.a)(e,u),j=Object(o.b)(s,"row"),m=Object(o.a)(),p="".concat(j,"-cols"),h=[];return m.forEach((function(e){var t,s=_[e];delete _[e],t=null!=s&&"object"===typeof s?s.cols:s;var r="xs"!==e?"-".concat(e):"";null!=t&&h.push("".concat(p).concat(r,"-").concat(t))})),Object(l.jsx)(d,Object(r.a)(Object(r.a)({ref:t},_),{},{className:a.a.apply(void 0,[c,j].concat(h))}))}));d.displayName="Row",t.a=d}}]);
//# sourceMappingURL=17.0987544d.chunk.js.map