(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[25],{415:function(t,e,r){"use strict";r.r(e);var n=r(12),a=r(13),s=r(14),o=r(15),c=r(0),i=r.n(c),p=r(97),u=r(265),h=r(88),d=r.n(h),l=r(79),_=r(26),b=r(75),m=r(3),j=function(t,e,r){var n=new Array(12).fill(0);for(var a in t){var s=t[a];n[s.date__month-1]="Million"===r?Object(b.c)((e?s.sum:s.quantity)/1e6):Object(b.c)((e?s.sum:s.quantity)/1e3)}return n},O=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(t){var a;Object(n.a)(this,r),a=e.call(this,t);var s=(new Date).getFullYear();return a.state={spinner:!1,series:[],options:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded"}},dataLabels:{enabled:!1},title:{text:a.props.dashboard_metric?"".concat(s," Products Trends by Month's Revenue"):"".concat(s," Products Trends by Month's Quantity"),align:"left"},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:l.a},yaxis:{title:{text:a.props.dashboard_metric?"Kshs (Millions)":"Litres"}},fill:{opacity:1},tooltip:{y:{formatter:a.props.dashboard_metric?function(t){return"Kshs ".concat(t," Millions")}:function(t){return"".concat(t," Litres")}}}}},a}return Object(a.a)(r,[{key:"render",value:function(){return Object(m.jsx)("div",{id:"chart",style:{marginTop:20},children:this.state.spinner?Object(m.jsxs)("div",{style:{height:350,position:"relative"},children:[Object(m.jsx)(_.a,{spinner:this.state.spinner})," "]}):Object(m.jsx)(d.a,{options:this.state.options,series:this.state.series,type:"bar",height:350})})}}]),r}(i.a.Component);O.getDerivedStateFromProps=function(t,e){var r=t.product_month,n=t.product_month_year;if(!0===t.update_product_month)return e.spinner=!0,e;e.spinner=!1;for(var a=[],s=0;s<r.length;s++){var o=r[s];a=a.concat({name:o.name,data:j(o.revenue,t.dashboard_metric,t.currency_type)})}return e.series=a,e.options.title.text=t.dashboard_metric?"".concat(n," Products Trends by Month's Revenue"):"".concat(n," Products Trends by Month's Quantity"),e.options.yaxis.title.text=t.dashboard_metric?"Kshs (".concat(t.currency_type,")"):"Litres (".concat(t.currency_type,")"),e.options.tooltip.y.formatter=t.dashboard_metric?function(e){return"Kshs ".concat(e).concat(Object(b.b)(t.currency_type))}:function(e){return"".concat(e).concat(Object(b.b)(t.currency_type)," Litres")},e};var y=O,f=r(62),v=r(63),x=r.n(v),T=r(124),D=r.n(T),g=function(t,e,r){for(var n=[],a=0;a<t.length;a++)n.push([new Date(t[a].date).getTime(),"Million"===r?Object(b.c)((e?t[a].sum:t[a].quantity)/1e6):Object(b.c)((e?t[a].sum:t[a].quantity)/1e3)]);return n},N=function(t,e){for(var r=t.product_series,n=[],a=0;a<r.length;a++){var s=g(r[a].revenue,t.dashboard_metric,e);n=n.concat({name:r[a].name,data:s})}return n},C=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).state={currency_type:a.props.currency_type,selection_dates:a.props.selection_dates,product_series:a.props.product_series,spinner:!1,series:[],options:{chart:{id:"area-datetime",type:"area",height:400,zoom:{autoScaleYaxis:!1}},title:{text:a.props.dashboard_metric?"Revenue":"Quantities"},annotations:{xaxis:[{x:new Date("".concat(a.props.selection_dates.startDate)).getTime(),borderColor:"#999",yAxisIndex:0}]},dataLabels:{enabled:!0},markers:{size:0,style:"hollow"},xaxis:{type:"datetime",tickAmount:5},yaxis:{title:{text:a.props.dashboard_metric?"Kshs (".concat(a.props.currency_type,")"):"Litres (".concat(a.props.currency_type,")")},min:0},tooltip:{y:{formatter:a.props.dashboard_metric?function(t){return"Kshs ".concat(t," Millions")}:function(t){return"".concat(t," Litres")}}}},selection:"one_month"},a}return Object(a.a)(r,[{key:"render",value:function(){try{D.a.exec("area-datetime","zoomX",new Date("".concat(this.state.selection_dates.startDate)).getTime(),new Date("".concat(this.state.selection_dates.endDate)).getTime())}catch(t){}return Object(m.jsx)("div",{id:"chart-timeline",children:this.state.spinner?Object(m.jsxs)("div",{style:{height:400,position:"relative"},children:[" ",Object(m.jsx)(_.a,{spinner:this.state.spinner})]}):Object(m.jsx)(d.a,{options:this.state.options,series:this.state.series,type:"area",height:400})})}}]),r}(i.a.Component);C.getDerivedStateFromProps=function(){var t=Object(f.a)(x.a.mark((function t(e,r){var n,a,s,o,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.dashboard_metric,a=e.selection_dates,s=e.currency_type,!0!==e.update_product_series){t.next=4;break}return r.spinner=!0,t.abrupt("return",r);case 4:return r.spinner=!1,"string"===typeof a.startDate&&(a.startDate=new Date("".concat(a.startDate)),a.endDate=new Date("".concat(a.endDate))),o=N(e,s),r.currency_type=e.currency_type,r.series=o,r.options.title.text=n?"Revenue":"Quantities",c=s,r.options.yaxis.title.text=n?"Kshs (".concat(c,")"):"Litres (".concat(c,")"),r.options.tooltip.y.formatter=n?function(t){return"Kshs ".concat(t).concat(Object(b.b)(s))}:function(t){return"".concat(t).concat(Object(b.b)(s)," Litres")},r.selection_dates=a,r.product_series=e.product_series,t.abrupt("return",r);case 16:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();var A=C,P=r(429),M=r(25),w=r(68),E=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(){var t;Object(n.a)(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={year:t.props.product_month_year},t.handleYearChange=function(){var e=Object(f.a)(x.a.mark((function e(r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.UPDATE_PRODUCT_MONTH_ACTION();case 2:return e.next=4,t.props.UPDATE_PRODUCT_MONTH_YEAR_ACTION(r);case 4:return e.next=6,t.props.GET_PRODUCT_MONTH_ACTION(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(a.a)(r,[{key:"render",value:function(){var t=this;return Object(m.jsx)("div",{children:Object(m.jsxs)(P.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(m.jsx)(P.a.Label,{children:"Year"}),Object(m.jsxs)(P.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleYearChange(e.target.value)},children:[Object(m.jsx)("option",{children:this.state.year}),[2022,2021].map((function(e,r){return parseInt(t.state.year)===e?null:Object(m.jsx)("option",{value:e,children:e},r)}))]})]})})}}]),r}(i.a.Component);E.getDerivedStateFromProps=function(t,e){return e.year=t.product_month_year,e};var I={UPDATE_PRODUCT_MONTH_YEAR_ACTION:w.N,GET_PRODUCT_MONTH_ACTION:w.m,UPDATE_PRODUCT_MONTH_ACTION:w.M},R=Object(M.b)((function(t){return{product_month_year:t.update_reducer.product_month_year}}),I)(E),k=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=[0,0,0,0,0,0,0,0,0,0,0,0],s=0,o=0;o<t.length;o++){var c=t[o],i=n?t[o].sum:t[o].quantity;a[c.date__month-1]="Million"===r?Object(b.c)(i/1e6):Object(b.c)(i/1e3),s+=i}return 13===e?"Million"===r?Object(b.c)(s/1e6):Object(b.c)(s/1e3):(console.log(a),a[e])},H=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).state={spinner:!1,series:[],options:{chart:{width:180,type:"donut"},labels:[],plotOptions:{pie:{startAngle:-90,endAngle:270}},dataLabels:{enabled:!0},fill:{type:"gradient"},tooltip:{y:{formatter:a.props.dashboard_metric?function(t){return"Kshs ".concat(t," Millions")}:function(t){return"".concat(t," Litres")}}},title:{text:a.props.dashboard_metric?"Depots Comparison by Revenue":"Depots Comparison by Quantity"},responsive:[{breakpoint:480,options:{chart:{width:200}}}]}},a}return Object(a.a)(r,[{key:"render",value:function(){var t=this.state.series.reduce((function(t,e){return t+e}),0);return Object(m.jsx)("div",{id:"chart",children:this.state.spinner?Object(m.jsx)("div",{style:{position:"relative",height:350},children:Object(m.jsx)(_.a,{spinner:this.state.spinner})}):Object(m.jsx)("div",{children:0===t?Object(m.jsx)("p",{className:"no-data",children:"No data for this year this month. Select another month or switch years"}):Object(m.jsx)(d.a,{options:this.state.options,series:this.state.series,type:"donut",width:400})})})}}]),r}(i.a.Component);H.getDerivedStateFromProps=function(t,e){var r=t.depot_month,n=[],a=[],s=(parseInt(t.depot_month_year),parseInt(t.depot_month_month));if(t.update_depot_month)return e.spinner=!0,e;e.spinner=!1;for(var o=0;o<r.length;o++){var c=r[o];n.push(c.name),c=c.revenue,a.push(k(c,s,t.currency_type,t.dashboard_metric))}return e.series=a,e.options.labels=n,e.options.title.text=t.dashboard_metric?"Depots Comparison by Revenue":"Depots Comparison by Quantity",e.options.tooltip.y.formatter=t.dashboard_metric?function(e){return"Kshs ".concat(e).concat(Object(b.b)(t.currency_type))}:function(e){return"".concat(e).concat(Object(b.b)(t.currency_type)," Litres")},e};var L=H,U=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(){var t;Object(n.a)(this,r);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={year:t.props.depot_month_year,month:t.props.depot_month_month},t.handleYearChange=function(){var e=Object(f.a)(x.a.mark((function e(r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.UPDATE_DEPOT_MONTH_ACTION();case 2:return e.next=4,t.props.UPDATE_DEPOT_MONTH_YEAR_ACTION(r);case 4:return e.next=6,t.props.GET_DEPOT_MONTH_ACTION(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleMonthChange=function(){var e=Object(f.a)(x.a.mark((function e(r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.UPDATE_DEPOT_MONTH_MONTH_ACTION(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}return Object(a.a)(r,[{key:"render",value:function(){var t=this,e=["January","February","March","April","May","June","July","August","September","October","November","December"];return Object(m.jsxs)("div",{className:"pie-select",children:[Object(m.jsxs)(P.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(m.jsx)(P.a.Label,{children:"Year"}),Object(m.jsxs)(P.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleYearChange(e.target.value)},children:[Object(m.jsx)("option",{children:this.state.year}),[2022,2021].map((function(e,r){return parseInt(t.state.year)===e?null:Object(m.jsx)("option",{value:e,children:e},r)}))]})]}),Object(m.jsxs)(P.a.Group,{className:"mb-4 pie-select__child",controlId:"exampleForm.ControlInput1",children:[Object(m.jsx)(P.a.Label,{children:"Month"}),Object(m.jsxs)(P.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleMonthChange(e.target.value)},children:[13===parseInt(this.state.month)?null:Object(m.jsx)("option",{value:this.state.month,children:e[parseInt(this.state.month)]}),Object(m.jsx)("option",{value:13,children:"All"}),e.map((function(e,r){return parseInt(t.state.month)===r?null:Object(m.jsx)("option",{value:r,children:e},r)}))]})]})]})}}]),r}(i.a.Component);U.getDerivedStateFromProps=function(t,e){return e.year!==t.depot_month_year||e.month!==t.depot_month_month?(e.year=t.depot_month_year,e.month=t.depot_month_month,e):null};var S={UPDATE_DEPOT_MONTH_MONTH_ACTION:w.E,UPDATE_DEPOT_MONTH_YEAR_ACTION:w.F,GET_DEPOT_MONTH_ACTION:w.h,UPDATE_DEPOT_MONTH_ACTION:w.D},Y=Object(M.b)((function(t){return{depot_month_month:t.update_reducer.depot_month_month,depot_month_year:t.update_reducer.depot_month_year}}),S)(U),F=function(t){Object(s.a)(r,t);var e=Object(o.a)(r);function r(){return Object(n.a)(this,r),e.apply(this,arguments)}return Object(a.a)(r,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"charts-section",children:[Object(m.jsx)(p.a,{children:Object(m.jsx)(u.a,{children:Object(m.jsx)("div",{className:"chart-area",children:Object(m.jsx)(A,{product_series:this.props.product_series,selection_dates:this.props.selection_dates,dashboard_metric:this.props.dashboard_metric,currency_type:this.props.currency_type,update_product_series:this.props.update_product_series})})})}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(u.a,{xs:7,children:Object(m.jsxs)("div",{className:"chart-area",children:[Object(m.jsx)(R,{}),Object(m.jsx)(y,{product_month:this.props.product_month,dashboard_metric:this.props.dashboard_metric,currency_type:this.props.currency_type,product_month_year:this.props.product_month_year,update_product_month:this.props.update_product_month})]})}),Object(m.jsx)(u.a,{xs:5,children:Object(m.jsxs)("div",{className:"chart-area",children:[Object(m.jsx)(Y,{}),Object(m.jsx)(L,{depot_month:this.props.depot_month,dashboard_metric:this.props.dashboard_metric,depot_month_month:this.props.depot_month_month,depot_month_year:this.props.depot_month_year,currency_type:this.props.currency_type,update_depot_month:this.props.update_depot_month})]})})]})]})}}]),r}(i.a.Component);e.default=F},97:function(t,e,r){"use strict";var n=r(18),a=r(69),s=r(65),o=r.n(s),c=r(0),i=r(70),p=r(3),u=["bsPrefix","className","as"],h=c.forwardRef((function(t,e){var r=t.bsPrefix,s=t.className,c=t.as,h=void 0===c?"div":c,d=Object(a.a)(t,u),l=Object(i.b)(r,"row"),_=Object(i.a)(),b="".concat(l,"-cols"),m=[];return _.forEach((function(t){var e,r=d[t];delete d[t],e=null!=r&&"object"===typeof r?r.cols:r;var n="xs"!==t?"-".concat(t):"";null!=e&&m.push("".concat(b).concat(n,"-").concat(e))})),Object(p.jsx)(h,Object(n.a)(Object(n.a)({ref:e},d),{},{className:o.a.apply(void 0,[s,l].concat(m))}))}));h.displayName="Row",e.a=h}}]);
//# sourceMappingURL=25.b497c532.chunk.js.map