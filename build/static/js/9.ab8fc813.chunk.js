(this.webpackJsonpopl_frontend=this.webpackJsonpopl_frontend||[]).push([[9],{258:function(t,e,l){"use strict";l.r(e);var r=l(62),o=l(12),s=l(13),i=l(14),n=l(15),c=l(63),h=l.n(c),b=l(0),a=l.n(b),d=l(424),p=l(436),g=l(269),u=l(429),y=l(192),f=l(25),j=l(68),x=l(26),m=l(302),O=l.n(m),_=l(140),v=l(3),C=O.a.ExcelFile,T=O.a.ExcelFile.ExcelSheet,w=function(t){Object(i.a)(l,t);var e=Object(n.a)(l);function l(){return Object(o.a)(this,l),e.apply(this,arguments)}return Object(s.a)(l,[{key:"render",value:function(){return Object(v.jsx)("div",{children:Object(v.jsx)(C,{element:Object(v.jsxs)(u.a,{variant:"secondary",size:"sm",style:{fontSize:10},children:[Object(v.jsx)(_.a,{color:"green",size:25})," Export"]}),children:Object(v.jsx)(T,{dataSet:this.props.dataset,name:"Organization"})})})}}]),l}(b.Component),S=w,A=function(t){Object(i.a)(l,t);var e=Object(n.a)(l);function l(){var t;Object(o.a)(this,l);for(var s=arguments.length,i=new Array(s),n=0;n<s;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))).state={sales_list:void 0!==t.props.sales_list?t.props.sales_list:[],sales_date:t.props.sales_date,depot:"All",product:"All",order_no:null,active:1,spinner:!1,success:!0,delete_order:null},t.onSearchChange=function(e){var l=t.state.active,r=50*(l-1),o=50*l;""===e||void 0===e||null===e?t.setState({sales_list:t.props.sales_list.slice(r,o)}):t.setState({order_no:e})},t.onSearch=function(e){e.preventDefault();var l=t.state.order_no,r=t.props.sales_list;r=r.filter((function(t){return t.order_no.includes(l)})),t.setState({sales_list:r,product:"All",depot:"All"})},t.handleCalc=function(){for(var e=t.state.sales_list,l=0,r=0,o=0;o<e.length;o++){var s=e[o];l+=s.vol_obs,r+=s.vol_obs*s.selling_price}return[r,l]},t.handleProductChange=function(){var e=Object(r.a)(h.a.mark((function e(l){var r,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.props.sales_list,"All"!==l&&(r=r.filter((function(t){return t.product===l}))),"All"!==t.state.depot&&(o=t.props.depots[parseInt(t.state.depot)].name,r=r.filter((function(t){return t.depot===o}))),t.setState({sales_list:r,product:l});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.handleDepotChange=function(e){var l=t.props.sales_list;if("All"!==e){var r=t.props.depots[parseInt(e)].name;l=l.filter((function(t){return t.depot===r}))}var o=t.state.product;"All"!==o&&(l=l.filter((function(t){return t.product===o}))),t.setState({sales_list:l,depot:e})},t.formatData=function(){for(var e=t.state.sales_list,l=[],r=0;r<e.length;r++){var o=e[r];l.push([{value:o.date,style:{fill:{patternType:"solid",fgColor:{rgb:"B4C6E7"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:o.depot,style:{fill:{patternType:"solid",fgColor:{rgb:"B4C6E7"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:o.product,style:{fill:{patternType:"solid",fgColor:{rgb:"B4C6E7"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:o.customer,style:{fill:{patternType:"solid",fgColor:{rgb:"7B7B7B"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.truck.plate_no?"":o.truck.plate_no,style:{fill:{patternType:"solid",fgColor:{rgb:"7B7B7B"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.truck.driver?"":o.truck.driver,style:{fill:{patternType:"solid",fgColor:{rgb:"7B7B7B"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.order_no?"":o.order_no,style:{fill:{patternType:"solid",fgColor:{rgb:"A9D08E"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.entry_no?"":o.entry_no,style:{fill:{patternType:"solid",fgColor:{rgb:"A9D08E"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.lpo_no?"":o.lpo_no,style:{fill:{patternType:"solid",fgColor:{rgb:"A9D08E"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:o.vol_obs,style:{fill:{patternType:"solid",fgColor:{rgb:"F8CBAD"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:null===o.vol_20?0:o.vol_20,style:{fill:{patternType:"solid",fgColor:{rgb:"F8CBAD"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{value:parseFloat(o.selling_price),style:{fill:{patternType:"solid",fgColor:{rgb:"F8CBAD"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}},alignment:{horizontal:"right"}}},{value:parseFloat(o.vol_obs*o.selling_price),style:{fill:{patternType:"solid",fgColor:{rgb:"00B050"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}},alignment:{horizontal:"right"}}},{value:o.is_paid,style:{fill:{patternType:"solid",fgColor:{rgb:"A9D08E"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}}])}return[{columns:[{title:"DATE",width:{wpx:80},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"DEPOT",width:{wpx:100},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"PRODUCT",width:{wpx:80},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"CUSTOMER",width:{wpx:180},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"TRUCK",width:{wpx:100},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"DRIVER",width:{wpx:150},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"ORDER NO",width:{wpx:100},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"ENTRY NO",width:{wpx:150},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"LPO NO",width:{wpx:120},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"VOL OBS",width:{wpx:80},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"VOL 20",width:{wpx:80},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"SELLING PRICE",width:{wpx:100},height:{wpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"AMOUNT",width:{wpx:100},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}},{title:"PAID",width:{wpx:50},height:{hpx:50},style:{font:{bold:!0},fill:{patternType:"solid",fgColor:{rgb:"548235"}},border:{bottom:{style:"thin",color:{rgb:"000000"}},top:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}}}}}],data:l}]},t}return Object(s.a)(l,[{key:"numberWithCommas",value:function(t){try{return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(e){return t}}},{key:"render",value:function(){for(var t=this,e=[],l=this.state.active,r=50*(l-1),o=50*l,s=function(r){e.push(Object(v.jsx)(d.a.Item,{active:r===l,onClick:function(){return t.setState({active:r})},children:r},r))},i=1;i<=Math.ceil(this.state.sales_list.length/50);i++)s(i);var n=this.props,c=n.depots,h=n.products,b=this.handleCalc(),a=this.formatData();return Object(v.jsx)("div",{children:this.state.spinner?Object(v.jsx)(x.a,{spinner:this.state.spinner}):Object(v.jsxs)("div",{className:"sale-table",children:[Object(v.jsx)("div",{className:"sale-table__header",children:Object(v.jsxs)(p.a,{className:"d-flex",style:{alignItems:"flex-end"},onSubmit:this.onSearch,children:[Object(v.jsx)(S,{dataset:a}),Object(v.jsxs)(p.a.Group,{className:"mb-4 pie-select__child sale-table__select",controlId:"exampleForm.ControlInput1",style:{marginBottom:0},children:[Object(v.jsx)(p.a.Label,{children:"Depot"}),Object(v.jsxs)(p.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleDepotChange(e.target.value)},children:["All"===this.state.depot?null:Object(v.jsx)("option",{value:this.state.depot,children:c[parseInt(this.state.depot)].name}),Object(v.jsx)("option",{value:"All",children:"All"}),c.map((function(e,l){return t.state.depot===l?null:Object(v.jsx)("option",{value:l,children:e.name},l)}))]})]}),Object(v.jsxs)(p.a.Group,{className:"mb-4 pie-select__child sale-table__select",controlId:"exampleForm.ControlInput1",style:{marginBottom:0},children:[Object(v.jsx)(p.a.Label,{children:"Product"}),Object(v.jsxs)(p.a.Select,{"aria-label":"Default select example",size:"sm",onChange:function(e){return t.handleProductChange(e.target.value)},children:["All"===this.state.product?null:Object(v.jsx)("option",{value:this.state.product,children:this.state.product}),Object(v.jsx)("option",{value:"All",children:"All"}),h.map((function(e,l){return t.state.product===e.name?null:Object(v.jsx)("option",{value:e.name,children:e.name},l)}))]})]}),Object(v.jsx)(g.a,{type:"search",placeholder:"Search by order no.",className:"me-2 sales-table__search-input","aria-label":"Search by order no.",size:"sm",onChange:function(e){return t.onSearchChange(e.target.value)}}),Object(v.jsx)(u.a,{variant:"outline-primary",type:"submit",children:"Search"})]})}),Object(v.jsxs)(y.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{}),Object(v.jsx)("th",{children:"Date"}),this.props.from_customer||"staff"!==this.props.token.depot?null:Object(v.jsx)("th",{children:"Depot"}),Object(v.jsx)("th",{children:"Product"}),this.props.from_customer?null:Object(v.jsx)("th",{children:"Customer"}),Object(v.jsx)("th",{children:"Truck"}),Object(v.jsx)("th",{children:"Driver"}),Object(v.jsx)("th",{children:"Order No"}),Object(v.jsx)("th",{children:"Lpo No"}),Object(v.jsx)("th",{children:"Entry No"}),Object(v.jsx)("th",{children:"S.Price"}),Object(v.jsx)("th",{children:"OBS Vol"}),Object(v.jsx)("th",{children:"Vol@20"}),Object(v.jsx)("th",{children:"Amount"}),Object(v.jsx)("th",{children:"Paid"})]})}),Object(v.jsxs)("tbody",{children:[this.state.sales_list.slice(r,o).map((function(e,l){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:r+l+1}),Object(v.jsx)("td",{children:e.date}),t.props.from_customer||"staff"!==t.props.token.depot?null:Object(v.jsx)("td",{children:e.depot}),Object(v.jsx)("td",{children:e.product}),t.props.from_customer?null:Object(v.jsx)("td",{children:e.customer}),Object(v.jsx)("td",{children:e.truck.plate_no}),Object(v.jsx)("td",{children:e.truck.driver}),Object(v.jsx)("td",{children:e.order_no}),Object(v.jsx)("td",{children:e.lpo_no}),Object(v.jsx)("td",{children:e.entry_no}),Object(v.jsx)("td",{children:e.selling_price}),Object(v.jsx)("td",{children:t.numberWithCommas(e.vol_obs)}),Object(v.jsx)("td",{children:t.numberWithCommas(e.vol_20)}),Object(v.jsx)("td",{children:t.numberWithCommas(e.vol_obs*e.selling_price)}),Object(v.jsx)("td",{children:e.is_paid?"True":"False"})]},l)})),Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{}),Object(v.jsx)("th",{children:"Totals"}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),this.props.from_customer||"staff"!==this.props.token.depot?null:Object(v.jsx)("th",{}),this.props.from_customer?null:Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsx)("th",{}),Object(v.jsxs)("th",{children:[this.numberWithCommas(b[1])," Litres"]}),Object(v.jsx)("th",{}),Object(v.jsxs)("th",{children:["Kshs. ",this.numberWithCommas(b[0])]}),Object(v.jsx)("th",{})]})]})]}),Object(v.jsx)("div",{children:Object(v.jsx)(d.a,{size:"sm",children:e})})]})})}}]),l}(a.a.Component);A.getDerivedStateFromProps=function(t,e){return e.success=!0,e};var D={GET_SALES_LIST_ACTION:j.p};e.default=Object(f.b)((function(t){var e={start_date:new Date(2022,1,20),end_date:new Date(2022,1,28)};return{token:t.auth_reducer.token,sales_date:t.update_reducer.sales_date?t.update_reducer.sales_date:e,update_get_sales_list:t.list_reducer.update_get_sales_list,depots:t.list_reducer.depot_list,products:t.list_reducer.product_list}}),D)(A)},328:function(t,e){},330:function(t,e){},340:function(t,e){},342:function(t,e){},367:function(t,e){},369:function(t,e){},370:function(t,e){},375:function(t,e){},377:function(t,e){},396:function(t,e){},408:function(t,e){},411:function(t,e){}}]);
//# sourceMappingURL=9.ab8fc813.chunk.js.map